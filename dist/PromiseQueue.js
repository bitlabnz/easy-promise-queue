!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.PromiseQueue=e()}(this,function(){"use strict";function t(n){return n&&"[object Function]"===Object.prototype.toString.call(n)}var n=function(){function i(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n}}();return function(){function e(n){if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this._pause=!1,(n=Object.assign({concurrency:1},n)).concurrency<1)throw new TypeError("Expected `concurrency` to be an integer which is bigger than 0");this._ongoingCount=0,this._concurrency=n.concurrency,this._resolveEmpty=function(){}}return n(e,[{key:"_next",value:function(){this._pause||(this._ongoingCount--,0<this._queue.length?this._queue.shift()():this._resolveEmpty())}},{key:"pause",value:function(){this._pause=!0}},{key:"resume",value:function(){this._pause=!1,this._next()}},{key:"prioritize",value:function(n){return this.add(n,!0)}},{key:"add",value:function(i,o){var n,u=this;if((n=i)&&"[object Array]"===Object.prototype.toString.call(n)&&i.every(t))return 1<i.length?this.add(i.shift()).add(i):this.add(i[0]);if(t(i))return new Promise(function(e,t){var n=function(){u._ongoingCount++,i().then(function(n){e(n),u._next()},function(n){t(n),u._next()})};u._ongoingCount<u._concurrency&&!u._pause?n():o?u._queue.unshift(n):u._queue.push(n)}),this;throw new TypeError("Expected `arg` in add(arg) must be a function which return a Promise, or an array of function which return a Promise")}},{key:"waitingCount",get:function(){return this._queue.length}},{key:"ongoingCount",get:function(){return this._ongoingCount}}]),e}()});
//# sourceMappingURL=PromiseQueue.js.map
